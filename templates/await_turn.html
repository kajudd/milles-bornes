{% extends "base.html" %}
{% block body %}
<script src="http://js.pusher.com/2.0/pusher.min.js"></script>
<script>
var pusher = new Pusher('cacfdd42bc51bc59cfb6'); 
</script>
<p><h1>Awaiting Turn</h1></p>


<script>
var channel = pusher.subscribe({{channel|tojson|safe}});
channel.bind('an_event', function(data) {
    alert('Your opponent has played: ' + data['played']); window.location = "/turn"
});
channel.bind('winner', function(data) {
	alert('Your opponent has won!'); window.location = "/loser"
});
channel.bind('tied', function(data) {
	alert('This game is a draw!'); window.location = "/tie_game"
});
</script>

<script>
$(document).ready(function () {
	var baraja = $('#baraja-el').baraja();
	 
	    baraja.fan( {
	        speed: 500,
	        easing: 'ease-out',
	        range: 40,
	        direction: 'right',
	        origin: {x: 50, y: 475},
	        center: true,
	        translation: 0	 
	} );
});

</script>

<h2>My Hand:</h2>
<ul id="baraja-el" class="baraja-container">
{% for card in names %}
<li>{{ card.image|safe }}</li>
{% endfor %}
</ul>


<br>
<br>

<table class="table table-hover">
<thead class="tablehead">
<tr>

<td><b>Scoreboard</b></td>
<td><b>Your Score</b></td>
<td><b>Opponent Score</b></td>

</tr>
</thead>

<tbody>
<tr class="success">
<td>Miles</td> 
<td>{{player_miles}}</td>
<td>{{op_miles}}</td>
</tr>

<tr class="success">
<td>Current Status</td> 
<td>{{player_status}}</td>
<td>{{op_status}}</td>
</tr>

<tr class="success">
<td>Current Speed Limit</td> 
<td>{{player_speed}}</td>
<td>{{op_speed}}</td>
</tr>

<tr class="success">
	<td>Current Immunities</td>
<td>
<ul class="tablelist">
{% for immunity in player_immunity %}
<li class="tableitem">{{immunity}}</li>
{% endfor %}
</ul>
</td>

<td>
	<ul class="tablelist">
{% for immunity in op_immunity %}
<li>{{immunity}}</li>
{% endfor %}
</ul>
</td>
</tbody>
</table>



<br>
<p><a href="{{ url_for('choose_game') }}">Back to your games</a></p>

{% endblock %}
